<div class="container" cdkDrag>
    <p class="croix clickable" (click)="close()">X</p>
    <!-- PARTIE HAUTE -->
    <div class="flex">
        <div class="groupeHautGauche">
            <div class="flex">
                <div class="hautGauche">
                    <div class="flex">
                        <div class="iconeEtGolds">
                            <img *ngIf="perso.forme" class="icone" src="./assets/images/{{perso.forme.minia}}.png">
                        </div>

                        <div class="data">
                            <p class="nom bigText">{{perso.nom}}</p>
                            <div class="etat flex">
                                <p class="clickable" (click)="formulaire='etat'">
                                    {{perso.etat}}</p>
                                <app-formulaire *ngIf="formulaire=='etat'" [perso]="perso" [formulaire]="formulaire"
                                    (closeForm)="formulaire=''"></app-formulaire>
                            </div>
                            <p class="niveau clickable bigText" (click)="clickGain(perso, 'Niveau')">{{gain == 'Niveau'
                                ?
                                'Confirmer
                                gain ?' : 'Niveau'}}
                                {{ gain != "Niveau" ? perso.niveau : "" }}</p>
                        </div>
                    </div>

                    <div class="pdvmana">
                        <div class="flex pdvmanadiv">
                            <p class="pdvtext clickable" (click)="formulaire='pv'">{{perso.pdv}}/{{perso.pdvmax}}</p>
                            <div class="grouppdvmana">
                                <img class="fill" draggable="false"
                                    src="./assets/images/pdvfill{{(perso.team==2?'2':'')}}.PNG"
                                    [style.width]="(perso.pdv/perso.pdvmax)*100+'%'" />
                                <img draggable="false" src="./assets/images/pdvmanabar.png" />
                            </div>
                            <app-formulaire *ngIf="formulaire=='pv'" [perso]="perso" [formulaire]="formulaire"
                                (closeForm)="formulaire=''"></app-formulaire>
                        </div>
                        <div class="flex pdvmanadiv">
                            <p class="manatext clickable" (click)="formulaire='mana'">{{perso.mana}}/{{perso.manamax}}
                            </p>
                            <div class="grouppdvmana">
                                <img class="fill" draggable="false" src="./assets/images/manafill.PNG"
                                    [style.width]="(perso.mana/perso.manamax)*100+'%'" />
                                <img draggable="false" src="./assets/images/pdvmanabar.png" />
                            </div>
                            <app-formulaire *ngIf="formulaire=='mana'" [perso]="perso" [formulaire]="formulaire"
                                (closeForm)="formulaire=''"></app-formulaire>
                        </div>
                    </div>
                </div>

                <div class="groupeHautDroite">

                    <p class="bigText">Statistiques</p>
                    <p class="clickable" *ngFor="let stat of perso.stats" (click)="clickGain(perso, stat.nom)">{{gain ==
                        stat.nom ? 'Confirmer gain ?' : stat.nom}} {{
                        gain != stat.nom ? stat.qte : "" }}</p>
                </div>

            </div>

            <div class="line"></div>

            <div class="flex between">

                <div>
                    <div class="flex">
                        <p class="bold">Arme principale :&nbsp;</p>
                        <p>{{perso.arme1}}</p>
                    </div>
                    <div class="flex">
                        <p class="bold">Arme secondaire :&nbsp;</p>
                        <p>{{perso.arme2}}</p>
                    </div>
                </div>


                <div class="containerGolds flex">
                    <div class="flex golds clickable" (click)="formulaire='gold'">
                        <img src="../../../assets/images/pieces.png" />
                        <p>{{perso.argent}}</p>
                    </div>

                    <app-formulaire *ngIf="formulaire=='gold'" [perso]="perso" [formulaire]="formulaire"
                        (closeForm)="formulaire=''"></app-formulaire>
                </div>
            </div>
        </div>


    </div>

    <!-- PARTIE BASSE -->

    <div>
        <div class="flex onglets">
            <p class="choix" (click)="ongletActif = 'inventaire'">Inventaire</p>
            <p class="choix" (click)="ongletActif = 'quetesPrincipales'">Quêtes principales</p>
            <p class="choix" (click)="ongletActif = 'quetesSecondaires'">Quêtes secondaires</p>
        </div>

        <div class="inventaire" *ngIf="ongletActif == 'inventaire'">
            <div class="objet" *ngFor="let item of perso.inventaire" (mouseover)="objetActif = item"
                (mouseleave)="objetActif = undefined;gain = ''" (click)="clickGain(perso, item.nom)">
                <img *ngIf="item.image" src="./assets/images/{{ item.image }}.png" />
                <div class="nomItem">
                    <p [hidden]="objetActif != item">{{gain == item.nom && gain != '' ? 'Confirmer
                        utilisation ?' : item.nom}}</p>
                </div>
                <p *ngIf="item.qte>0" class="qteObjet">{{item.qte}}</p>
            </div>
        </div>

        <div class="quetes" *ngIf="ongletActif == 'quetesPrincipales'">
            <div *ngFor="let quete of getQuetesPrincipales();let i=index">
                <div class="line" *ngIf="i!=0"></div>
                <p class="bigText">{{quete.nom}}</p>
                <p>{{quete.description}}</p>
                <p class="bold">Etape {{quete.etape}} : {{quete.etat}}</p>
            </div>
        </div>

        <div class="quetes" *ngIf="ongletActif == 'quetesSecondaires'">
            <div *ngFor="let quete of data.quetessecondaires;let i=index">
                <div class="line" *ngIf="i!=0"></div>
                <p class="bigText">{{quete.nom}}</p>
                <p>{{quete.description}}</p>
                <p class="bold">Etape {{quete.etape}} : {{quete.etat}}</p>
            </div>
        </div>
    </div>
</div>